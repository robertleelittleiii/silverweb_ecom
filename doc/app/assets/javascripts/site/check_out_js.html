<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>check_out.js - RDoc Documentation</title>

<link href="../../../../fonts.css" rel="stylesheet">
<link href="../../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../";
</script>

<script src="../../../../js/jquery.js"></script>
<script src="../../../../js/navigation.js"></script>
<script src="../../../../js/search_index.js"></script>
<script src="../../../../js/search.js"></script>
<script src="../../../../js/searcher.js"></script>
<script src="../../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../README_rdoc.html">README</a>
  
    <li><a href="../../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/imgpreview_full_jquery_js.html">imgpreview.full.jquery.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_jqzoom-core_js.html">jquery.jqzoom-core.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_serialize-object_js.html">jquery.serialize-object.js</a>
  
    <li><a href="../../../../app/assets/javascripts/menus/show_products_type_js.html">show_products_type.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/enter_order_js.html">enter_order.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/order_success_js.html">order_success.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/user_orders_js.html">user_orders.js</a>
  
    <li><a href="../../../../app/assets/javascripts/product_related_products_js.html">product_related_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/coupon_settings_js.html">coupon_settings.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/product_preferences_js.html">product_preferences.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/silverweb_ecom_js.html">silverweb_ecom.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/check_out_js.html">check_out.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/live_search_js.html">live_search.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/product_detail_js.html">product_detail.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_js.html">show_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_with_page_js.html">show_products_with_page.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/store_locator_js.html">store_locator.js</a>
  
    <li><a href="../../../../app/assets/javascripts/vendors/vendor_list_js.html">vendor_list.js</a>
  
    <li><a href="../../../../app/assets/stylesheets/customers_css.html">customers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/jquery_jqzoom_scss.html">jquery.jqzoom.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders_css.html">orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/index__css.html">index_.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/user_orders_css.html">user_orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/product_related_products_css.html">product_related_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products_css.html">products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/edit_css.html">edit.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/product_list_scss.html">product_list.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/retailers_css.html">retailers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/scaffold_css.html">scaffold.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/silverweb_ecom_css.html">silverweb_ecom.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/check_out_css.html">check_out.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail-horizontal_css.html">product_detail-horizontal.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail_css.html">product_detail.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_css.html">show_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_css.html">show_products_with_page.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_mm_css.html">show_products_with_page_mm.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/store_locator_css.html">store_locator.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/vendors_css.html">vendors.css</a>
  
    <li><a href="../../../../app/mailers/user_notifier_old_rb_orig.html">user_notifier_old.rb.orig</a>
  
    <li><a href="../../../../app/views/products/delete_image_rjs.html">delete_image.rjs</a>
  
    <li><a href="../../../../app/views/site/product_index_feed_atom_builder.html">product_index_feed.atom.builder</a>
  
    <li><a href="../../../../lib/tasks/image_tasks_rake.html">image_tasks.rake</a>
  
    <li><a href="../../../../lib/tasks/silverweb_ecom_tasks_rake.html">silverweb_ecom_tasks.rake</a>
  
    <li><a href="../../../../nbproject/private/config_properties.html">config.properties</a>
  
    <li><a href="../../../../nbproject/private/private_properties.html">private.properties</a>
  
    <li><a href="../../../../nbproject/private/private_xml.html">private.xml</a>
  
    <li><a href="../../../../nbproject/private/rake-d_txt.html">rake-d</a>
  
    <li><a href="../../../../nbproject/project_properties.html">project.properties</a>
  
    <li><a href="../../../../nbproject/project_xml.html">project.xml</a>
  
    <li><a href="../../../../silverweb_ecom_gemspec.html">silverweb_ecom.gemspec</a>
  
    <li><a href="../../../../test/dummy/README_rdoc.html">README</a>
  
    <li><a href="../../../../test/dummy/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../test/dummy/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../../test/dummy/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../../test/dummy/config_ru.html">config.ru</a>
  
    <li><a href="../../../../test/dummy/public/404_html.html">404.html</a>
  
    <li><a href="../../../../test/dummy/public/422_html.html">422.html</a>
  
    <li><a href="../../../../test/dummy/public/500_html.html">500.html</a>
  
    <li><a href="../../../../test/dummy/public/favicon_ico.html">favicon.ico</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/assets/javascripts/site/check_out.js">

<pre>To change this template, choose Tools | Templates
and open the template in the editor.</pre>

<p>// TODO:  Add ajax function to load pictures based on properties object.</p>

<p>var notice = “”</p>

<p>//function setUpPurrNotifier(headline, message) //{ //    var notice =
&#39;&lt;div class=“notice”&gt;&#39; //    + &#39;&lt;div
class=“notice-body”&gt;&#39; //    + &#39;&lt;img
src=“/images/interface/info.png” /&gt;&#39; //    + &#39;&lt;h3&gt;&#39; +
headline + &#39;&lt;/h3&gt;&#39; //    + &#39;&lt;p&gt;&#39; + message +
&#39;&lt;/p&gt;&#39; //    + &#39;&lt;/div&gt;&#39; //    + &#39;&lt;div
class=“notice-bottom”&gt;&#39; //    + &#39;&lt;/div&gt;&#39; //    +
&#39;&lt;/div&gt;&#39;; //    if (message.length &gt; 1)  //    { //       
$(notice).purr(); //    } //</p>

<p>//</p>

<p>//}</p>

<p>$(document).ready(function () {</p>

<pre>bindProductActions();
bindChangeShipping();
intercept_click();
ui_ajax_cart_select();

// check for full screen and adjust layout
//if ($(&quot;#full-screen&quot;).html().trim() == &quot;true&quot;)
//{
//    $(&quot;div#page-middle-left&quot;).hide();
//    $(&quot;div#content&quot;).width(&quot;100%&quot;);
//    $(&#39;#Content&#39;).css(&#39;background&#39;,&quot;white&quot;)</pre>

<p>//</p>

<pre>// }
//</pre>

<p>});</p>

<p>function bindChangeShipping() {</p>

<pre>$(&#39;select#shipping_type&#39;).change(function () {

    //alert(&quot;changed&quot;);
    //cart_item_id=$(this).parent().parent().find(&quot;#cart-item-index&quot;).html().trim()
    //updateShoppingCartItemInfo($(this).parent().parent().find(&quot;.shopping-cart-item-info&quot;), cart_item_id)
    setTimeout(function () {
        updateShoppingCartSummary();
    }, 1250);

    //;
    //updateShoppingCartView();
    // $(this).parent().parent().find(&quot;.shopping-cart-item-info&quot;).html(

    // alert(&quot;add success&quot;);
    $(&quot;#loader_progress&quot;).hide();

});</pre>

<p>}</p>

<p>function updateCartContents() {</p>

<pre>$.ajax({
    url: &quot;/site/get_cart_contents&quot;,
    dataType: &quot;html&quot;,
    type: &quot;GET&quot;,
    data: &quot;&quot;,
    success: function (data)
    {
        //alert(data);
        if (data === undefined || data === null || data === &quot;&quot;)
        {
            //display warning
        }
        else
        {
            $(&quot;#cart-contents&quot;).html(data);
            bindProductActions();

        }
    }
});</pre>

<p>}</p>

<p>function updateShoppingCartView() {</p>

<pre>$.ajax({
    url: &quot;/site/get_shopping_cart_info&quot;,
    dataType: &quot;html&quot;,
    type: &quot;GET&quot;,
    data: &quot;&quot;,
    success: function (data)
    {
        //alert(data);
        if (data === undefined || data === null || data === &quot;&quot;)
        {
            //display warning
        }
        else
        {
            $(&quot;#shopping-cart-info&quot;).html(data);
        }
    }
});</pre>

<p>}</p>

<p>function updateShoppingCartItemInfo(item_to_update, item_id) {</p>

<pre>$.ajax({
    url: &quot;/site/get_shopping_cart_item_info&quot;,
    dataType: &quot;html&quot;,
    type: &quot;GET&quot;,
    data: &quot;item_no=&quot; + item_id,
    success: function (data)
    {
        //alert(data);
        if (data === undefined || data === null || data === &quot;&quot;)
        {
            //display warning
        }
        else
        {
            $(item_to_update).html(data);
            console.log(item_to_update);
        }
    }

}).fail(function (jqXHR, textStatus) {
    alert(&quot;Request failed: &quot; + textStatus);
});
;</pre>

<p>}</p>

<p>function updateShoppingCartSummary() {</p>

<pre>$.ajax({
    url: &quot;/site/get_cart_summary_body&quot;,
    dataType: &quot;html&quot;,
    type: &quot;GET&quot;,
    data: &quot;&quot;,
    success: function (data)
    {
        //alert(data);
        if (data === undefined || data === null || data === &quot;&quot;)
        {
            //display warning
        }
        else
        {
            $(&quot;.cart-summary-body&quot;).html(data);
            if (parseFloat($(&quot;#cart-total-price&quot;).text().replace(/\$|,/g, &#39;&#39;)) == 0)
            {
                //alert(&quot;Cart is empty&quot;);
                window.location = &quot;/site?alert=The%20cart%20is%20now%20empty.&quot;;
            }
        }
    }
});</pre>

<p>}</p>

<p>function bindProductActions() {</p>

<pre>$(&#39;.add-product&#39;).on(&#39;ajax:success&#39;, function (xhr, data, status) {
    cart_item_id = $(this).parent().parent().parent().find(&quot;#cart-item-index&quot;).html().trim()
    updateShoppingCartItemInfo($(this).parent().parent().parent().find(&quot;.shopping-cart-item-info&quot;), cart_item_id)
    updateShoppingCartSummary();
    updateShoppingCartView();
    // $(this).parent().parent().find(&quot;.shopping-cart-item-info&quot;).html(
    setUpPurrNotifier(&quot;Inventory Warning&quot;, data)

    // alert(&quot;add success&quot;);
    $(&quot;#loader_progress&quot;).hide();

}).on(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;*  ;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;#loader_progress&quot;).show();

});

$(&#39;.minus-product&#39;).bind(&#39;ajax:success&#39;, function (xhr, data, status) {
    cart_item_id = $(this).parent().parent().parent().find(&quot;#cart-item-index&quot;).html().trim();
    updateShoppingCartItemInfo($(this).parent().parent().parent().find(&quot;.shopping-cart-item-info&quot;), cart_item_id);
    updateShoppingCartSummary();
    updateShoppingCartView();
    // console.log(this);
    item_quantity = $(this).parent().parent().parent().find(&quot;#item-quatity&quot;).text().trim();
    // console.log(item_quantity);

    if (item_quantity == &quot;1&quot;)
    {
        $(this).parent().parent().parent().parent().parent().remove();
        updateCartitemindex(&quot;div#cart-contents table.cart-item&quot;,&quot;div#cart-item-index&quot;);
        //updateCartContents();
    }
    //else
   // {
    //    $(this).parent().parent().show();
   // }

    // alert(&quot;minus success&quot;);
    $(&quot;#loader_progress&quot;).hide();

}).bind(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;  *;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;#loader_progress&quot;).show();

}).bind(&#39;ajax:fail&#39;, function (xhr, status, error) {
    $(this).parent().parent().hide();
    alert(&#39;error&#39;);
});

$(&#39;.remove-product&#39;).bind(&#39;ajax:success&#39;, function (xhr, data, status) {

    updateCartContents();
    updateShoppingCartSummary();
    updateShoppingCartView();

    // alert(&quot;remove success&quot;);
    $(&quot;#loader_progress&quot;).hide();
}).bind(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;*/*;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;#loader_progress&quot;).show();

});</pre>

<p>} ;</p>

<p>function BestInPlaceCallBack(input) {</p>

<pre>//  console.log(input);
$(&quot;#loader_progress&quot;).show();

if (input.attributeName == &quot;coupon_code&quot;)
{
    $.post(&#39;/site/get_cart_summary_body&#39;, function (data)
    {
        $(&#39;.cart-summary-body&#39;).html(data);
        $(&quot;#loader_progress&quot;).hide();
    });
    // alert(&quot;hello&quot;);
}</pre>

<p>//    <a href="color">if(input.data.indexOf(“product_detail</a>”) != -1) //
{ //        //  alert(“color changed”); //        var $product_id =
$(“#product-id”).text(); //        $(“#loader_progress”).show(); // //     
$.post(&#39;/products/render_image_section/&#39; + $product_id,
function(data) //        { //           
$(&#39;.imagesection&#39;).html(data); //           
$(“#loader_progress”).hide(); //            styleizefilebutton(); //       
bindImageChage(); // //        }); //    } } ;</p>

<p>function validate_login(url_to_goto) {</p>

<pre>if ($(&quot;div#logged-in&quot;).text() == &quot;true&quot;) {
    window.location = url_to_goto;
    return(false);
}
else {
    loadLoginBox(url_to_goto, false);
    return(true);
}</pre>

<p>}</p>

<p>function intercept_click() {</p>

<pre>$(&quot;a.validate-login&quot;).click(function (event){
    event.stopPropagation();
    validate_login($(this).attr(&#39;href&#39;));
    return false;
});</pre>

<p>}</p>

<p>// .find(“div#cart-item-index”).text()</p>

<p>function updateCartitemindex(parent, keySelector) {</p>

<pre>$(parent).each(function (index, value) {
    $(value).find(&quot;div#cart-item-index&quot;).text(index);
    $(value).find(&quot;div#decrease-item a&quot;).attr(&quot;href&quot;,&quot;/site/decrement_cart_item?current_item=&quot;+ index);
    $(value).find(&quot;div#delete-item a&quot;).attr(&quot;href&quot;,&quot;/site/delete_cart_item?current_item=&quot;+ index);
    $(value).find(&quot;div#increase-item a&quot;).attr(&quot;href&quot;,&quot;/site/increment_cart_item?current_item=&quot;+ index);
  });</pre>

<p>}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

