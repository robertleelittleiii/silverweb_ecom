<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>imgpreview.full.jquery.js - RDoc Documentation</title>

<link href="../../../fonts.css" rel="stylesheet">
<link href="../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/navigation.js"></script>
<script src="../../../js/search_index.js"></script>
<script src="../../../js/search.js"></script>
<script src="../../../js/searcher.js"></script>
<script src="../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../LICENSE.html">LICENSE</a>
  
    <li><a href="../../../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../README_rdoc.html">README</a>
  
    <li><a href="../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../app/assets/javascripts/coupons/edit_js.html">edit.js</a>
  
    <li><a href="../../../app/assets/javascripts/coupons/index__js.html">index_.js</a>
  
    <li><a href="../../../app/assets/javascripts/coupons/shared_js.html">shared.js</a>
  
    <li><a href="../../../app/assets/javascripts/imgpreview_full_jquery_js.html">imgpreview.full.jquery.js</a>
  
    <li><a href="../../../app/assets/javascripts/jquery_jqzoom-core_js.html">jquery.jqzoom-core.js</a>
  
    <li><a href="../../../app/assets/javascripts/jquery_serialize-object_js.html">jquery.serialize-object.js</a>
  
    <li><a href="../../../app/assets/javascripts/menus/show_products_type_js.html">show_products_type.js</a>
  
    <li><a href="../../../app/assets/javascripts/orders/enter_order_js.html">enter_order.js</a>
  
    <li><a href="../../../app/assets/javascripts/orders/index__js.html">index_.js</a>
  
    <li><a href="../../../app/assets/javascripts/orders/order_success_js.html">order_success.js</a>
  
    <li><a href="../../../app/assets/javascripts/orders/user_orders_js.html">user_orders.js</a>
  
    <li><a href="../../../app/assets/javascripts/product_related_products_js.html">product_related_products.js</a>
  
    <li><a href="../../../app/assets/javascripts/products/coupon_settings_js.html">coupon_settings.js</a>
  
    <li><a href="../../../app/assets/javascripts/products/edit_js.html">edit.js</a>
  
    <li><a href="../../../app/assets/javascripts/products/index__js.html">index_.js</a>
  
    <li><a href="../../../app/assets/javascripts/products/product_preferences_js.html">product_preferences.js</a>
  
    <li><a href="../../../app/assets/javascripts/products/shared_js.html">shared.js</a>
  
    <li><a href="../../../app/assets/javascripts/silverweb_ecom_js.html">silverweb_ecom.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/check_out_js.html">check_out.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/live_search_js.html">live_search.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/product_detail_js.html">product_detail.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/show_products_js.html">show_products.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/show_products_with_page_js.html">show_products_with_page.js</a>
  
    <li><a href="../../../app/assets/javascripts/site/store_locator_js.html">store_locator.js</a>
  
    <li><a href="../../../app/assets/javascripts/vendors/vendor_list_js.html">vendor_list.js</a>
  
    <li><a href="../../../app/assets/stylesheets/customers_css.html">customers.css</a>
  
    <li><a href="../../../app/assets/stylesheets/jquery_jqzoom_scss.html">jquery.jqzoom.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/orders_css.html">orders.css</a>
  
    <li><a href="../../../app/assets/stylesheets/orders/index__css.html">index_.css</a>
  
    <li><a href="../../../app/assets/stylesheets/orders/user_orders_css.html">user_orders.css</a>
  
    <li><a href="../../../app/assets/stylesheets/product_related_products_css.html">product_related_products.css</a>
  
    <li><a href="../../../app/assets/stylesheets/products_css.html">products.css</a>
  
    <li><a href="../../../app/assets/stylesheets/products/edit_css.html">edit.css</a>
  
    <li><a href="../../../app/assets/stylesheets/products/product_list_scss.html">product_list.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/retailers_css.html">retailers.css</a>
  
    <li><a href="../../../app/assets/stylesheets/scaffold_css.html">scaffold.css</a>
  
    <li><a href="../../../app/assets/stylesheets/silverweb_ecom_css.html">silverweb_ecom.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/check_out_css.html">check_out.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/product_detail-horizontal_css.html">product_detail-horizontal.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/product_detail_css.html">product_detail.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/show_products_css.html">show_products.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/show_products_with_page_css.html">show_products_with_page.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/show_products_with_page_mm_css.html">show_products_with_page_mm.css</a>
  
    <li><a href="../../../app/assets/stylesheets/site/store_locator_css.html">store_locator.css</a>
  
    <li><a href="../../../app/assets/stylesheets/vendors_css.html">vendors.css</a>
  
    <li><a href="../../../app/mailers/user_notifier_old_rb_orig.html">user_notifier_old.rb.orig</a>
  
    <li><a href="../../../app/views/products/delete_image_rjs.html">delete_image.rjs</a>
  
    <li><a href="../../../app/views/site/product_index_feed_atom_builder.html">product_index_feed.atom.builder</a>
  
    <li><a href="../../../lib/tasks/image_tasks_rake.html">image_tasks.rake</a>
  
    <li><a href="../../../lib/tasks/silverweb_ecom_tasks_rake.html">silverweb_ecom_tasks.rake</a>
  
    <li><a href="../../../nbproject/private/config_properties.html">config.properties</a>
  
    <li><a href="../../../nbproject/private/private_properties.html">private.properties</a>
  
    <li><a href="../../../nbproject/private/private_xml.html">private.xml</a>
  
    <li><a href="../../../nbproject/private/rake-d_txt.html">rake-d</a>
  
    <li><a href="../../../nbproject/project_properties.html">project.properties</a>
  
    <li><a href="../../../nbproject/project_xml.html">project.xml</a>
  
    <li><a href="../../../silverweb_ecom_gemspec.html">silverweb_ecom.gemspec</a>
  
    <li><a href="../../../test/dummy/README_rdoc.html">README</a>
  
    <li><a href="../../../test/dummy/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../test/dummy/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../test/dummy/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../test/dummy/config_ru.html">config.ru</a>
  
    <li><a href="../../../test/dummy/public/404_html.html">404.html</a>
  
    <li><a href="../../../test/dummy/public/422_html.html">422.html</a>
  
    <li><a href="../../../test/dummy/public/500_html.html">500.html</a>
  
    <li><a href="../../../test/dummy/public/favicon_ico.html">favicon.ico</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/assets/javascripts/imgpreview.full.jquery.js">

<pre>imgPreview jQuery plugin
Copyright (c) 2009 James Padolsey
j@qd9.co.uk | http://james.padolsey.com
Dual licensed under MIT and GPL.
Updated: 09/02/09
@author James Padolsey
@version 0.22</pre>

<p>(function($){</p>

<pre>$.expr[&#39;:&#39;].linkingToImage = function(elem, index, match){
    // This will return true if the specified attribute contains a valid link to an image:
    return !! ($(elem).attr(match[3]) &amp;&amp; $(elem).attr(match[3]).match(/\.(gif|jpe?g|png|bmp)$/i));
};

$.fn.imgPreview = function(userDefinedSettings){

    var s = $.extend({

           DEFAULTS   

        // CSS to be applied to image:
        imgCSS: {},
        // Distance between cursor and preview:
        distanceFromCursor: {top:10, left:10},
        // Boolean, whether or not to preload images:
        preloadImages: true,
        // Callback: run when link is hovered: container is shown:
        onShow: function(){},
        // Callback: container is hidden:
        onHide: function(){},
        // Callback: Run when image within container has loaded:
        onLoad: function(){},
        // ID to give to container (for CSS styling):
        containerID: &#39;imgPreviewContainer&#39;,
        // Class to be given to container while image is loading:
        containerLoadingClass: &#39;loading&#39;,
        // Prefix (if using thumbnails), e.g. &#39;thumb_&#39;
        thumbPrefix: &#39;&#39;,
        // Where to retrieve the image from:
        srcAttr: &#39;href&#39;

    }, userDefinedSettings),

    $container = $(&#39;&lt;div/&gt;&#39;).attr(&#39;id&#39;, s.containerID)
                    .append(&#39;&lt;img/&gt;&#39;).hide()
                    .css(&#39;position&#39;,&#39;absolute&#39;)
                    .appendTo(&#39;body&#39;),

    $img = $(&#39;img&#39;, $container).css(s.imgCSS),

    // Get all valid elements (linking to images / ATTR with image link):
    $collection = this.filter(&#39;:linkingToImage(&#39; + s.srcAttr + &#39;)&#39;);

    // Re-usable means to add prefix (from setting):
    function addPrefix(src) {
        return src.replace(/(\/?)([^\/]+)$/,&#39;$1&#39; + s.thumbPrefix + &#39;$2&#39;);
    }

    if (s.preloadImages) {
        (function(i){
            var tempIMG = new Image(),
                callee = arguments.callee;
            tempIMG.src = addPrefix($($collection[i]).attr(s.srcAttr));
            tempIMG.onload = function(){
                $collection[i + 1] &amp;&amp; callee(i + 1);
            };
        })(0);
    }

    $collection
        .mousemove(function(e){

            $container.css({
                top: e.pageY + s.distanceFromCursor.top + &#39;px&#39;,
                left: e.pageX + s.distanceFromCursor.left + &#39;px&#39;
            });

        })
        .hover(function(){

            var link = this;
            $container
                .addClass(s.containerLoadingClass)
                .show();
            $img
                .load(function(){
                    $container.removeClass(s.containerLoadingClass);
                    $img.show();
                    s.onLoad.call($img[0], link);
                })
                .attr( &#39;src&#39; , addPrefix($(link).attr(s.srcAttr)) );
            s.onShow.call($container[0], link);

        }, function(){

            $container.hide();
            $img.unbind(&#39;load&#39;).attr(&#39;src&#39;,&#39;&#39;).hide();
            s.onHide.call($container[0], this);

        });

    // Return full selection, not $collection!
    return this;

};</pre>

<p>})(jQuery);</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

