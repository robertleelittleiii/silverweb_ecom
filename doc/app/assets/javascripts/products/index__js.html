<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>index_.js - RDoc Documentation</title>

<link href="../../../../fonts.css" rel="stylesheet">
<link href="../../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../";
</script>

<script src="../../../../js/jquery.js"></script>
<script src="../../../../js/navigation.js"></script>
<script src="../../../../js/search_index.js"></script>
<script src="../../../../js/search.js"></script>
<script src="../../../../js/searcher.js"></script>
<script src="../../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../README_rdoc.html">README</a>
  
    <li><a href="../../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/imgpreview_full_jquery_js.html">imgpreview.full.jquery.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_jqzoom-core_js.html">jquery.jqzoom-core.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_serialize-object_js.html">jquery.serialize-object.js</a>
  
    <li><a href="../../../../app/assets/javascripts/menus/show_products_type_js.html">show_products_type.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/enter_order_js.html">enter_order.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/order_success_js.html">order_success.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/user_orders_js.html">user_orders.js</a>
  
    <li><a href="../../../../app/assets/javascripts/product_related_products_js.html">product_related_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/coupon_settings_js.html">coupon_settings.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/product_preferences_js.html">product_preferences.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/silverweb_ecom_js.html">silverweb_ecom.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/check_out_js.html">check_out.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/live_search_js.html">live_search.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/product_detail_js.html">product_detail.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_js.html">show_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_with_page_js.html">show_products_with_page.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/store_locator_js.html">store_locator.js</a>
  
    <li><a href="../../../../app/assets/javascripts/vendors/vendor_list_js.html">vendor_list.js</a>
  
    <li><a href="../../../../app/assets/stylesheets/customers_css.html">customers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/jquery_jqzoom_scss.html">jquery.jqzoom.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders_css.html">orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/index__css.html">index_.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/user_orders_css.html">user_orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/product_related_products_css.html">product_related_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products_css.html">products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/edit_css.html">edit.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/product_list_scss.html">product_list.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/retailers_css.html">retailers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/scaffold_css.html">scaffold.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/silverweb_ecom_css.html">silverweb_ecom.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/check_out_css.html">check_out.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail-horizontal_css.html">product_detail-horizontal.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail_css.html">product_detail.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_css.html">show_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_css.html">show_products_with_page.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_mm_css.html">show_products_with_page_mm.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/store_locator_css.html">store_locator.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/vendors_css.html">vendors.css</a>
  
    <li><a href="../../../../app/mailers/user_notifier_old_rb_orig.html">user_notifier_old.rb.orig</a>
  
    <li><a href="../../../../app/views/products/delete_image_rjs.html">delete_image.rjs</a>
  
    <li><a href="../../../../app/views/site/product_index_feed_atom_builder.html">product_index_feed.atom.builder</a>
  
    <li><a href="../../../../lib/tasks/image_tasks_rake.html">image_tasks.rake</a>
  
    <li><a href="../../../../lib/tasks/silverweb_ecom_tasks_rake.html">silverweb_ecom_tasks.rake</a>
  
    <li><a href="../../../../nbproject/private/config_properties.html">config.properties</a>
  
    <li><a href="../../../../nbproject/private/private_properties.html">private.properties</a>
  
    <li><a href="../../../../nbproject/private/private_xml.html">private.xml</a>
  
    <li><a href="../../../../nbproject/private/rake-d_txt.html">rake-d</a>
  
    <li><a href="../../../../nbproject/project_properties.html">project.properties</a>
  
    <li><a href="../../../../nbproject/project_xml.html">project.xml</a>
  
    <li><a href="../../../../silverweb_ecom_gemspec.html">silverweb_ecom.gemspec</a>
  
    <li><a href="../../../../test/dummy/README_rdoc.html">README</a>
  
    <li><a href="../../../../test/dummy/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../test/dummy/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../../test/dummy/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../../test/dummy/config_ru.html">config.ru</a>
  
    <li><a href="../../../../test/dummy/public/404_html.html">404.html</a>
  
    <li><a href="../../../../test/dummy/public/422_html.html">422.html</a>
  
    <li><a href="../../../../test/dummy/public/500_html.html">500.html</a>
  
    <li><a href="../../../../test/dummy/public/favicon_ico.html">favicon.ico</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/assets/javascripts/products/index_.js">

<p>var productTableAjax; var products_index_callDocumentReady_called = false;
$(document).ready(function () {</p>

<pre>if (!products_index_callDocumentReady_called)
{
    products_index_callDocumentReady_called = true;
    if ($(&quot;#as_window&quot;).text() == &quot;true&quot;)
    {</pre>

<p>//  alert(“it is a window”);</p>

<pre>    } else
    {
        products_index_callDocumentReady();
    }
}</pre>

<p>}); //function bindClicktoProductTableRow(){ //    $(&#39;#product-table
.product-row&#39;).on(“click”,function(e){ //        console.log(e.target);
//        if (!($(e.target).prop(“class”) == “delete-image”)) //        {
//            $(this).addClass(&#39;row_selected&#39;); //           
productID=$(this).find(“#product-id”).text(); //            window.location
= “/products/edit/”+productID; //        } //    }); //}</p>

<p>function products_index_callDocumentReady() {</p>

<pre>require(&quot;imgpreview.full.jquery.js&quot;);
requireCss(&quot;tables.css&quot;);
requireCss(&quot;products.css&quot;);
require(&quot;products/shared.js&quot;);
require(&quot;imgpreview.full.jquery.js&quot;);
$(&quot;body&quot;).css(&quot;cursor&quot;, &quot;progress&quot;);
createProductsTable();
$(&quot;body&quot;).css(&quot;cursor&quot;, &quot;default&quot;);
bindNewProduct();
bindDeleteProduct();
bindPreferences();
bindCoupons();
$(&quot;a.button-link&quot;).button();
bindDatatableSearchField(&quot;div.dataTables_filter input&quot;,&quot;products&quot;);</pre>

<p>}</p>

<p>function bindDeleteProduct() {</p>

<pre>$(&quot;.delete-product-item&quot;).on(&quot;click&quot;, function (e) {

    console.log($(this).parent().parent().parent().find(&#39;#product-id&#39;).text());
    var product_id = $(this).parent().parent().parent().find(&#39;#product-id&#39;).text();
    deleteProduct(product_id);
    return false;
});</pre>

<p>}</p>

<p>function deleteProduct(product_id) {</p>

<pre>var answer = confirm(&#39;Are you sure you want to delete this?&#39;)
if (answer) {
    $.ajax({
        url: &#39;/products/delete_ajax?id=&#39; + product_id,
        success: function (data)
        {
            setUpPurrNotifier(&quot;Notice&quot;, &quot;Item Successfully Deleted.&quot;);
            productTableAjax.draw();
        }
    });
}</pre>

<p>}</p>

<p>function createProductsTable() {</p>

<pre>productTableAjax = $(&#39;#product-table&#39;).DataTable({
    pageLength: 25,
    lengthMenu: [[25, 50, 100], [25, 50, 100]],
    stateSave: true,
    stateDuration: 0,
    stateSaveCallback: function (settings, data) {
        localStorage.setItem(&#39;DataTables_products_&#39; + window.location.pathname, JSON.stringify(data));
    },
    stateLoadCallback: function (settings) {
        return JSON.parse(localStorage.getItem(&#39;DataTables_products_&#39; + window.location.pathname));
    },
    processing: true,
    order: [[0, &quot;asc&quot;]],
    serverSide: true,
    searchDelay: 500,
    ajax: {
        url: &quot;/products/product_table&quot;,
        type: &quot;post&quot;
    },
    rowCallback: function (row, data, index) {
        $(row).addClass(&#39;product-row&#39;);
        $(row).addClass(&#39;gradeA&#39;);
        //return row;
    },
    initComplete: function () {
        // $(&quot;.best_in_place&quot;).best_in_place(); 

    },
    drawCallback: function (settings) {
        producteditClickBinding(&quot;tr.product-row&quot;);
        bindDeleteProduct();
        image_list = $(&#39;a.zoom-image&#39;);
        if (image_list.length &gt; 0) {
            image_list.imgPreview();
        }
        //bindClicktoProductTableRow();
        $(&quot;td.dataTables_empty&quot;).attr(&quot;colspan&quot;, &quot;20&quot;)
    }
    ,
    columns: [
        {width: &#39;100&#39;},
        {width: &#39;300&#39;},
        {width: &#39;600&#39;},
        {width: &#39;25&#39;},
        {width: &#39;25&#39;}
    ]</pre>

<p>//        , //        “iDisplayLength”: 25, //        “aLengthMenu”: [[25,
50, 100], [25, 50, 100]], //        “bStateSave”: true, //       
“bProcessing”: true, //        “bServerSide”: true, //       
“sAjaxSource”: “/products/product_table”, //        “fnRowCallback”:
function (nRow, aData, iDisplayIndex, iDisplayIndexFull) { //           
$(nRow).addClass(&#39;product-row&#39;); //           
$(nRow).addClass(&#39;gradeA&#39;); // //            return nRow; //       
}, //        “aoColumns”: //                [ //                    { //   
“sWidth”: “100” //                    }, //                    { //        
“sWidth”: “300” //                    }, //                    { //        
“sWidth”: “600” //                    }, //                    { //        
“sWidth”: “25” //                    }, //                    { //         
“sWidth”: “25” //                    } //                ] //        , //  
“fnDrawCallback”: function () { //           
producteditClickBinding(“tr.product-row”); //           
bindDeleteProduct(); // //            image_list =
$(&#39;a.zoom-image&#39;); //            if (image_list.length &gt; 0) { //
image_list.imgPreview(); //            } //        }</p>

<pre>});
$(&quot;#product-table&quot;).css(&quot;width&quot;, &quot;100%&quot;)</pre>

<p>}</p>

<p>function bindNewProduct() {</p>

<pre>$(&#39;a#new-product&#39;).unbind().bind(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;*  ;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;progress&quot;);
}).bind(&#39;ajax:success&#39;, function (xhr, data, status) {
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;default&quot;);
    productTableAjax.draw();
    setUpPurrNotifier(&quot;Notice&quot;, &quot;New Product Created!&#39;&quot;);
}).bind(&#39;ajax:error&#39;, function (evt, xhr, status, error) {
    setUpPurrNotifier(&quot;Error&quot;, &quot;Product Creation Failed!&#39;&quot;);
});</pre>

<p>//    $(&#39;a#new-product&#39;).bind(&#39;ajax:beforeSend&#39;, function
(evt, xhr, settings) { //        // alert(“ajax:before”);</p>

<p>//        console.log(&#39;ajax:before&#39;); //        console.log(evt);
//        console.log(xhr); //        console.log(settings); // //       
$(“body”).css(“cursor”, “progress”); // // // //   
}).bind(&#39;ajax:success&#39;, function (evt, data, status, xhr) { //     
//  alert(“ajax:success”);  //        console.log(&#39;ajax:success&#39;);
//        console.log(evt); //        console.log(“date:” + data + “:”); //
//        $(“body”).css(“cursor”, “progress”); //       
console.log(data.id); //        editProduct(data.id); // //       
console.log(status); //        console.log(xhr); // //   
}).bind(&#39;ajax:error&#39;, function (evt, xhr, status, error) { //      
// alert(“ajax:failure”);  //        console.log(&#39;ajax:error&#39;); // 
console.log(evt); //        console.log(xhr); //       
console.log(status); //        console.log(error); // //       
alert(“Error:” + <a href=""error"">JSON.parse(data.responseText)</a>); //  
$(“body”).css(“cursor”, “default”); // // //   
}).bind(&#39;ajax:complete&#39;, function (evt, xhr, status) { //        //
alert(“ajax:complete”);</p>

<p>//        console.log(&#39;ajax:complete&#39;); //        console.log(evt);
//        console.log(xhr); //        // console.log(status); //       
$(“body”).css(“cursor”, “default”); // // //    });</p>

<p>}</p>

<p>function bindPreferences() {</p>

<pre>$(&#39;a#product-prefs&#39;).unbind().bind(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;  *;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;progress&quot;);
}).bind(&#39;ajax:success&#39;, function (xhr, data, status) {
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;default&quot;);
    productPrefsDialog = createAppDialog(data, &quot;product-prefs-dialog&quot;);
    productPrefsDialog.dialog(&#39;open&#39;);
    productPrefsDialog.dialog({
        close: function (event, ui) {
            productPrefsDialog.html(&quot;&quot;);
            productPrefsDialog.dialog(&quot;destroy&quot;);
        }
    });
    require(&quot;products/product_preferences.js&quot;);
    product_preferences_callDocumentReady();
    //update_rolls_callDocumentReady();

    // setupRolesSelection();
    // 
}).bind(&#39;ajax:error&#39;, function (evt, xhr, status, error) {
    setUpPurrNotifier(&quot;Error&quot;, &quot;Prefs could not be opened!&#39;&quot;);
});</pre>

<p>}</p>

<p>function bindCoupons() {</p>

<pre>$(&#39;a#coupons-settings&#39;).unbind().bind(&#39;ajax:beforeSend&#39;, function (e, xhr, settings) {
    xhr.setRequestHeader(&#39;accept&#39;, &#39;*/*;q=0.5, text/html, &#39; + settings.accepts.html);
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;progress&quot;);
}).bind(&#39;ajax:success&#39;, function (xhr, data, status) {
    $(&quot;body&quot;).css(&quot;cursor&quot;, &quot;default&quot;);
    productPrefsDialog = createAppDialog(data, &quot;coupons-settings-dialog&quot;);
    productPrefsDialog.dialog(&#39;open&#39;);
    productPrefsDialog.dialog({
        close: function (event, ui) {
            productPrefsDialog.html(&quot;&quot;);
            productPrefsDialog.dialog(&quot;destroy&quot;);
        }
    });
    require(&quot;coupons/index_.js&quot;);
    coupons_index_callDocumentReady();
    //update_rolls_callDocumentReady();

    // setupRolesSelection();
    // 
}).bind(&#39;ajax:error&#39;, function (evt, xhr, status, error) {
    setUpPurrNotifier(&quot;Error&quot;, &quot;Coupons could not be opened!&#39;&quot;);
});</pre>

<p>}</p>

<p>//function bindDatatableSearchField(search_field_name, model_name) { //   
$(search_field_name).attr(“title”,“Use &#39;:&#39; to search specific
fields. Seperate search terms by &#39;,&#39;.”) //</p>

<p>//    $(search_field_name).autocomplete({ //        //     source:
“/contacts/contact_search.json”, //        source: function (request,
response) { //            var field_value = request.term; //            if
((field_value == “:”) | (field_value.slice(-2) == “,:”) |
(field_value.slice(-3) == “, :”)) { //                console.log(“activate
popup.”); //               // $(“div.dataTables_filter input”).css(“width”,
“400px”); //                    $(search_field_name).autoGrowInput({
minWidth: 135, maxWidth: 400, comfortZone: 50 }); //                   
$(search_field_name).css(“min-width”, “200px”); //</p>

<p>//                $.ajax({ //                    url: “/”+ model_name +
“/search_fields.json”, //                    dataType: “json”, //          
data: { //                        q: request.term, //                    },
//                    success: function (data) { // //                     
// Handle &#39;no match&#39; indicated by [ “” ] response //               
response(data.length === 1 &amp;&amp; data[ 0 ].length === 0 ? [] : data);
//                    } // //                }); //            } //       
} //        , //        minLength: 0, //        response: function (event,
ui) { //        } //        , select: function (event, ui) { //</p>

<p>// //            var current_value = $(this).val(); //            var
field_value = “”; // //            if (current_value == “:”) // first
search term. //            { //                field_value = ui.item.value
+ “:”; // //            } else //            { //               
field_value = (current_value.slice(-2) == “,:” ? current_value.slice(0, -2)
: (current_value.slice(-3) == “, :” ? current_value.slice(0, -3) :
current_value)); //                field_value = field_value + “, ” +
ui.item.value + “:”; //            } // //           
$(this).val(field_value); //           
$(this).caretToEnd().autoGrowInput(); //            return false; //       
} //    } //    ); // //}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

