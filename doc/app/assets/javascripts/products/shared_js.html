<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>shared.js - RDoc Documentation</title>

<link href="../../../../fonts.css" rel="stylesheet">
<link href="../../../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../../";
</script>

<script src="../../../../js/jquery.js"></script>
<script src="../../../../js/navigation.js"></script>
<script src="../../../../js/search_index.js"></script>
<script src="../../../../js/search.js"></script>
<script src="../../../../js/searcher.js"></script>
<script src="../../../../js/darkfish.js"></script>


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../../LICENSE.html">LICENSE</a>
  
    <li><a href="../../../../MIT-LICENSE.html">MIT-LICENSE</a>
  
    <li><a href="../../../../README_rdoc.html">README</a>
  
    <li><a href="../../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/coupons/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/imgpreview_full_jquery_js.html">imgpreview.full.jquery.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_jqzoom-core_js.html">jquery.jqzoom-core.js</a>
  
    <li><a href="../../../../app/assets/javascripts/jquery_serialize-object_js.html">jquery.serialize-object.js</a>
  
    <li><a href="../../../../app/assets/javascripts/menus/show_products_type_js.html">show_products_type.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/enter_order_js.html">enter_order.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/order_success_js.html">order_success.js</a>
  
    <li><a href="../../../../app/assets/javascripts/orders/user_orders_js.html">user_orders.js</a>
  
    <li><a href="../../../../app/assets/javascripts/product_related_products_js.html">product_related_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/coupon_settings_js.html">coupon_settings.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/edit_js.html">edit.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/index__js.html">index_.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/product_preferences_js.html">product_preferences.js</a>
  
    <li><a href="../../../../app/assets/javascripts/products/shared_js.html">shared.js</a>
  
    <li><a href="../../../../app/assets/javascripts/silverweb_ecom_js.html">silverweb_ecom.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/check_out_js.html">check_out.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/live_search_js.html">live_search.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/product_detail_js.html">product_detail.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_js.html">show_products.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/show_products_with_page_js.html">show_products_with_page.js</a>
  
    <li><a href="../../../../app/assets/javascripts/site/store_locator_js.html">store_locator.js</a>
  
    <li><a href="../../../../app/assets/javascripts/vendors/vendor_list_js.html">vendor_list.js</a>
  
    <li><a href="../../../../app/assets/stylesheets/customers_css.html">customers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/jquery_jqzoom_scss.html">jquery.jqzoom.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders_css.html">orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/index__css.html">index_.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/orders/user_orders_css.html">user_orders.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/product_related_products_css.html">product_related_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products_css.html">products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/edit_css.html">edit.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/products/product_list_scss.html">product_list.scss</a>
  
    <li><a href="../../../../app/assets/stylesheets/retailers_css.html">retailers.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/scaffold_css.html">scaffold.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/silverweb_ecom_css.html">silverweb_ecom.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/check_out_css.html">check_out.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail-horizontal_css.html">product_detail-horizontal.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/product_detail_css.html">product_detail.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_css.html">show_products.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_css.html">show_products_with_page.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/show_products_with_page_mm_css.html">show_products_with_page_mm.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/site/store_locator_css.html">store_locator.css</a>
  
    <li><a href="../../../../app/assets/stylesheets/vendors_css.html">vendors.css</a>
  
    <li><a href="../../../../app/mailers/user_notifier_old_rb_orig.html">user_notifier_old.rb.orig</a>
  
    <li><a href="../../../../app/views/products/delete_image_rjs.html">delete_image.rjs</a>
  
    <li><a href="../../../../app/views/site/product_index_feed_atom_builder.html">product_index_feed.atom.builder</a>
  
    <li><a href="../../../../lib/tasks/image_tasks_rake.html">image_tasks.rake</a>
  
    <li><a href="../../../../lib/tasks/silverweb_ecom_tasks_rake.html">silverweb_ecom_tasks.rake</a>
  
    <li><a href="../../../../nbproject/private/config_properties.html">config.properties</a>
  
    <li><a href="../../../../nbproject/private/private_properties.html">private.properties</a>
  
    <li><a href="../../../../nbproject/private/private_xml.html">private.xml</a>
  
    <li><a href="../../../../nbproject/private/rake-d_txt.html">rake-d</a>
  
    <li><a href="../../../../nbproject/project_properties.html">project.properties</a>
  
    <li><a href="../../../../nbproject/project_xml.html">project.xml</a>
  
    <li><a href="../../../../silverweb_ecom_gemspec.html">silverweb_ecom.gemspec</a>
  
    <li><a href="../../../../test/dummy/README_rdoc.html">README</a>
  
    <li><a href="../../../../test/dummy/Rakefile.html">Rakefile</a>
  
    <li><a href="../../../../test/dummy/app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../../test/dummy/app/assets/stylesheets/application_css.html">application.css</a>
  
    <li><a href="../../../../test/dummy/config_ru.html">config.ru</a>
  
    <li><a href="../../../../test/dummy/public/404_html.html">404.html</a>
  
    <li><a href="../../../../test/dummy/public/422_html.html">422.html</a>
  
    <li><a href="../../../../test/dummy/public/500_html.html">500.html</a>
  
    <li><a href="../../../../test/dummy/public/favicon_ico.html">favicon.ico</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page app/assets/javascripts/products/shared.js">

<pre>To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.</pre>

<p>product_edit_dialog = “”;</p>

<p>function producteditClickBinding(selector) {</p>

<pre>// selectors .edit-product-item, tr.product-row 

$(selector).unbind(&quot;click&quot;).one(&quot;click&quot;, function (event) {
    event.stopPropagation();
    console.log($(this).find(&#39;#product-id&#39;).text());
    var product_id = $(this).parent().find(&#39;#item-id&#39;).text();
    if (product_id === &quot;&quot;)
    {
        var product_id = $(this).find(&#39;#product-id&#39;).text();

    }
    var is_iframe = $(&quot;application-space&quot;).length &gt; 0

    var url = &#39;/products/&#39; + product_id + &#39;/edit?request_type=window&amp;window_type=iframe&amp;as_window=true&#39;;

    // $(this).effect(&quot;highlight&quot;, {color: &quot;#669966&quot;}, 1000);

    $.ajax({
        url: url,
        success: function (data)
        {
            product_edit_dialog = createAppDialog(data, &quot;edit-product-dialog&quot;, {}, &quot;&quot;);
            product_edit_dialog.dialog({
                close: function (event, ui) {
                    if ($(&quot;table#product-table&quot;).length &gt; 0)
                        productTableAjax.draw();

                    if ($(&quot;div#edit-product-dialog&quot;).length &gt; 0)
                    {
                        current_product_id = $(&quot;div#product div#attr-products div#product-id&quot;).text();
                        if (product_id === current_product_id)
                        {
                            show_product(product_id);
                        }
                    }

                    if (typeof tinyMCE.editors[0] != &quot;undefined&quot;)
                    {
                        tinyMCE.editors[0].destroy();
                    }

                    $(&#39;div#edit-product-dialog&#39;).html(&quot;&quot;);
                    $(&#39;div#edit-product-dialog&#39;).dialog(&quot;destroy&quot;);
                    update_content();
                    update_backoffice_elements();
                    producteditClickBinding(selector);
                    producteditClickBinding(&quot;div.edit-product&quot;);

                }
            });

            require(&quot;products/edit.js&quot;);
            requireCss(&quot;products/edit.css&quot;);
            requireCss(&quot;products.css&quot;);

            products_edit_callDocumentReady();
            product_edit_dialog.dialog(&#39;open&#39;);

        }
    });</pre>

<p>//        if (is_iframe) { //                       
$(&#39;iframe#products-app-id&#39;,window.parent.document).attr(“src”,url);
//                        producteditClickBinding(this); //        } //    
else //            { //                window.location = url; // //        
}</p>

<pre>});</pre>

<p>}</p>

<p>// // Admin editor  //</p>

<p>function orderUpdate(event, ui) {</p>

<pre>alert(&quot;order changed!&quot;);
console.log(event);
console.log(ui);</pre>

<p>}</p>

<p>function setUpOrderChange(block_name, item_name) {</p>

<pre>//    $( &quot;#product-block&quot; ).sortable({ 
//        handle: &quot;#edit-product&quot; , 
//        stop: function( event, ui ) {
//            orderUpdate(event,ui);
//        }
//    });

var currentPage = $(&quot;#page_number&quot;).text();

block_name = (typeof (block_name) == &quot;undefined&quot;) ? &#39;#product-block&#39; : block_name;
item_name = (typeof (item_name) == &quot;undefined&quot;) ? &#39;div.product-item&#39; : item_name;

// console.log(block_name);
// console.log(item_name);

$(block_name).sortable({
    dropOnEmpty: false,
    items: item_name,
    handle: &#39;.handle&#39;,
    cursor: &#39;-webkit-grabbing&#39;,
    opacity: 0.4,
    scroll: true,
    update: function () {
        $.ajax({
            type: &#39;post&#39;,
            data: $(block_name).sortable(&#39;serialize&#39;) + &quot;&amp;   page=&quot; + currentPage,
            dataType: &#39;script&#39;,
            complete: function (request) {
                $(block_name).effect(&#39;highlight&#39;);
            },
            url: &#39;/products/sort&#39;
        })
    }
});</pre>

<p>}</p>

<p>function bindProductMenu() {</p>

<pre>$(&quot;.edit-product&quot;).hover(
        function () {
            $(this).append($(&quot;&lt;div class=&#39;edit-product-menu&#39;&gt;Edit&lt;/br&gt;To Next Page&lt;/br&gt;&lt;/div&gt;&quot;));
        },
        function () {
            $(this).find(&quot;div:last&quot;).remove();
        }
);</pre>

<p>}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

